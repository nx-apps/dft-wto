<link rel="import" href="components/importer-panel.html">
<dom-module id="page-list-importer">
  <style is="custom-style" include="iron-flex iron-flex-factors iron-flex-alignment gl-size gl-color gl-table gl-toast">
    .elevation{
      border-radius: 5px;
      margin: 10px;
      padding: 5px;
      background-color: white;
    }
    .gl-table-default{
         border-collapse: collapse;
         width: 100%;
         white-space: nowrap;
     }
     .text-table{
       text-align: center;
     }
  </style>
  <template>
    <paper-material elevation="1" class="elevation">
      <div class="searchBox searchBorder">
        <gl-grid-row width="{{getWidth}}">
          <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,4]]"></gl-grid-col>
          <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,4]]">
            <gl-combo-box id="exporter_id" label="เลขประจำตัวผู้เสียภาษี" item-label-path="seller_name"
                item-value-path="exporter_id" value="{{dataSelected.exporter_id}}" name="exporter_id"></gl-combo-box>
          </gl-grid-col>
        </gl-grid-row>
        <gl-grid-row>
          <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,3]]"></gl-grid-col>
          <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,2]]">
            <gl-form-dropdown-menu label="ปี" placeholder="เลือกปีโควตา">
              <paper-menu class="dropdown-content" attr-for-selected="value">
                <paper-item value="2015">2015</paper-item>
                <paper-item value="2016">2016</paper-item>
              </paper-menu>
            </gl-form-dropdown-menu>
          </gl-grid-col>
          <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,2]]">
            <gl-form-dropdown-menu label="งวด" placeholder="ทั้งหมด">
              <paper-menu class="dropdown-content" attr-for-selected="value">
              <paper-item>ทั้งหมด</paper-item>
              <paper-item value="period_no1">1</paper-item>
              <paper-item value="period_no2">2</paper-item>
              <paper-item value="period_no3">3</paper-item>
              </paper-menu>
            </gl-form-dropdown-menu>
          </gl-grid-col>
          <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,2]]">
            <gl-form-dropdown-menu label="ชนิดโควตา" placeholder="ทั้งหมด">
              <paper-menu class="dropdown-content" attr-for-selected="value">
              <paper-item>ทั้งหมด</paper-item>
              <paper-item value="in_q">ในโควตา</paper-item>
              <paper-item value="ou_q">นอกโควตา</paper-item>
              </paper-menu>
            </gl-form-dropdown-menu>
          </gl-grid-col>
        </gl-grid-row>
        <gl-grid-row>
          <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,5]]"></gl-grid-col>
          <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,3]]">
            <paper-button class="gl-btn-info buttonSearch" on-tap="" title="ค้นหา" raised>ค้นหา</paper-button>
          </gl-grid-col>
        </gl-grid-row>
      </div>

      <div class="searchBorder" style="overflow-x:auto;">
        <table class="gl-table-default">
          <thead class="table-head">
            <tr>
              <th><div class="text-table">เลขที่หนังสือรับรอง</div></th>
              <th><div class="text-table">ผู้นำเข้า</div></th>
              <th><div class="text-table">เลขประจำตัวผู้เสียภาษี</div></th>
              <th><div class="text-table">ประเภทการนำเข้า</div></th>
              <th><div class="text-table">วันที่ขอ</div></th>
              <th><div class="text-table">วันที่นำเข้า</div></th>
              <th><div class="text-table">สถานะการรายงาน</div></th>
            </tr>
          </thead>


          <template is="dom-repeat" items="{{list}}">
            <tbody>
              <tr id="detailRegExporter" on-tap="tap_selectData" data="[[item]]" style="cursor:pointer;">
                <td><div class="text-table">{{item.request_id}}</div></td>
                <td><div class="text-table">{{item.receive_name}}</div></td>
                <td><div class="text-table">{{item.receive_tax_id}}</div></td>
                <td><div class="text-table">{{item.quota_name}}</div></td>
                <td><div class="text-table">{{item.request_print_date}}</div></td>
                <td><div class="text-table">{{item.import_date}}</div></td>
                <td><div class="text-table">{{item.report_status_name}}</div></td>
              </tr>
            </tbody>
          </template>
        </table>
      </div>
    </paper-material>

    <panel-right title="รายละเอียดผู้นำเข้า">
        <importer-panel></importer-panel>
    </panel-right>

  </template>
  <script>
    Polymer({
      is: "page-list-importer",
      behaviors: [
          nylonBehavior,
          ReduxBehavior,
          importerAction
      ],
      properties: {
        list:{
			    statePath:'importer.list'
		    }
      },
      nylonPageActive:function(){
        this.dispatchAction('IMPORT_LIST')
      },
      tap_selectData:function(){
        this.$$('panel-right').open();
      }

    });
  </script>
</dom-module>
