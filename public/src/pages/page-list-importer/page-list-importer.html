
<link rel="import" href="components/importer-search.html">

<link rel="import" href="components/importer-list.html">

<link rel="import" href="components/importer-panel.html">
<dom-module id="page-list-importer">
  <style is="custom-style" include="iron-flex iron-flex-factors iron-flex-alignment gl-size gl-color gl-table gl-toast">
    .elevation{
      border-radius: 5px;
      margin: 10px;
      padding: 5px;
      background-color: white;
    }

     .text-table{
       text-align: center;
     }
  </style>
  <template>
    <paper-material elevation="1" class="elevation">
      <importer-search></importer-search>

      <importer-list list="[[list]]"></importer-list>
    </paper-material>

    <panel-right title="รายละเอียดผู้นำเข้า">
        <importer-panel data="[[data]]"></importer-panel>
    </panel-right>

  </template>
  <script>
    Polymer({
      is: "page-list-importer",
      behaviors: [
          nylonBehavior,
          ReduxBehavior,
          importerAction,
          quotaAction,
          uploadAction
      ],
      properties: {
        list:{
			    statePath:'importer.list'
		    }
      },
      listeners: {
         '_open-panel-right':'openPanelRight',
      },
      nylonPageActive:function(){
        let link = '?&year='
        let year = new Date().getFullYear();
        this.dispatchAction('IMPORT_SET_YEAR',Number(year)+543)
        this.dispatchAction('QUOTA_lIST');
        this.dispatchAction('IMPORT_LIST_ALL',link.concat(year))
        this.dispatchAction('UPLOAD_LIST');
      },
      openPanelRight(){
        this.$$('panel-right').open();
        this.$$('importer-panel').setPage();
      }

    });
  </script>
</dom-module>
