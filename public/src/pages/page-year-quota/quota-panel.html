<link rel="import" href="./quota-manage.html">
<dom-module id="quota-panel">
    <style include="page-style">
            /*paper-tabs{
                --paper-tabs-selection-bar-color:#FF753F;
                --paper-tabs-selection-bar:{
                    border: 2px solid #95bf31;
                }
                --paper-tabs:{
                    background-color: white;
                }
            }
            paper-tab{
                color:#FF753F;
                font-family: 'CSChatThaiUI', sans-serif;
                font-size: 18px;
                --paper-tab-content-unselected:{
                    color: black;
                }
            }*/
            .flex-end-justified {
                @apply(--layout-horizontal);
                @apply(--layout-end-justified);
            }
            div.container{
                background-color: var(--gl-white-color);
            }
        </style>
    <template>
        <div class="container">
            <gl-form-panel set-padding="10px 20px 10px 20px" set-border="1px">
                <!--<gl-form-panel-head label="Header" set-padding="10px" set-border="1px">
                </gl-form-panel-head>-->
                <gl-form-panel-body label="" set-padding="10px" set-border="1px">
                    <quota-manage select="{{select}}"></quota-manage>
                </gl-form-panel-body>
                <gl-form-panel-footer label="" set-padding="10px">
                    <template is="dom-if" if="[[select.id]]">
                    <paper-button class="gl-btn-danger" on-tap="deleteData" raised>ลบข้อมูล</paper-button>
                </template>
                <paper-button class="gl-btn-success" on-tap="sendData" raised>บันทึก</paper-button>
                </gl-form-panel-footer>
            </gl-form-panel>
            
            <div class="flex-end-justified">
                
            </div>
        </div>
        

    </template>
    <script>
        Polymer({
            is: 'quota-panel',
            behaviors:[ReduxBehavior],
            properties:{
                select:{
                    statePath:'quota.select'
                }
            },
            sendData(){
                // console.log(typeof this.select.id == "undefined")
                if(typeof this.select.id == "undefined"){
                    this.dispatchAction('QUOTA_INSERT',this.select)
                }else{
                    this.dispatchAction('QUOTA_UPDATE',this.select)
                }
            },
            deleteData(){
                this.fire('toast',{
                    status:'openDialog',
                    text:'ต้องการลบข้อมูลใช่หรือไม่ ?',
                    confirmed:(result)=>{
                        if(result == true){
                            this.dispatchAction('QUOTA_DELETE',this.select)
                        }
                    }
                 })
                
            },
        });
    </script>
</dom-module>
